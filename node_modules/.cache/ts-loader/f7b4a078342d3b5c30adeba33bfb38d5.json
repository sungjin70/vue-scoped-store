{"remainingRequest":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js!C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-mixin.ts","dependencies":[{"path":"C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-mixin.ts","mtime":1624769035355},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9wcm9qZWN0L3Njb3BlZC1zdG9yZS92dWUtc2NvcGVkLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovcHJvamVjdC9zY29wZWQtc3RvcmUvdnVlLXNjb3BlZC1zdG9yZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6L3Byb2plY3Qvc2NvcGVkLXN0b3JlL3Z1ZS1zY29wZWQtc3RvcmUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9wcm9qZWN0L3Njb3BlZC1zdG9yZS92dWUtc2NvcGVkLXN0b3JlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCBDb21wb25lbnQgZnJvbSAndnVlLWNsYXNzLWNvbXBvbmVudCc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgQW55VHlwZVN0b3JlU2VydmljZSB9IGZyb20gIi4vY29yZS9hbnktdHlwZS1zdG9yZS1zZXJ2aWNlIjsKaW1wb3J0IHsgc2NvcGVkU3RvcmVNYW5hZ2VyIH0gZnJvbSAiLi9zY29wZWQtc3RvcmUtbWFuYWdlciI7Cgp2YXIgU2NvcGVkU3RvcmVDb21wb25lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoU2NvcGVkU3RvcmVDb21wb25lbnQsIF9WdWUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFNjb3BlZFN0b3JlQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gU2NvcGVkU3RvcmVDb21wb25lbnQoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjb3BlZFN0b3JlQ29tcG9uZW50KTsKCiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMuZGF0YVRyYW5NYW5hZ2VyID0gc2NvcGVkU3RvcmVNYW5hZ2VyOwogICAgX3RoaXMuc3Vic2NyaXB0aW9uc0ZvclBwZ2UgPSBbXTsKICAgIF90aGlzLnN1YnNjcmlwdGlvbnNGb3JHbG9iYWwgPSBbXTsKICAgIF90aGlzLmlzUGFnZSA9IGZhbHNlOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNjb3BlZFN0b3JlQ29tcG9uZW50LCBbewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYmVmb3JlRGVzdG9yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlRGVzdG9yeSgpIHsKICAgICAgY29uc29sZS5sb2coJ2JlZm9yZURlc3RvcnkoKScpOwoKICAgICAgZm9yICh2YXIgayBpbiB0aGlzLnN1YnNjcmlwdGlvbnNGb3JHbG9iYWwpIHsKICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNGb3JHbG9iYWxba10udW5zdWJzY3JpYmUoKTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgX2sgaW4gdGhpcy5zdWJzY3JpcHRpb25zRm9yUHBnZSkgewogICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc0ZvclBwZ2VbX2tdLnVuc3Vic2NyaWJlKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzUGFnZSkgewogICAgICAgIHZhciBfdGhpcyRkYXRhVHJhbk1hbmFnZXI7CgogICAgICAgIChfdGhpcyRkYXRhVHJhbk1hbmFnZXIgPSB0aGlzLmRhdGFUcmFuTWFuYWdlci5wYWdlRGF0YVNlcnZpY2UpID09PSBudWxsIHx8IF90aGlzJGRhdGFUcmFuTWFuYWdlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZGF0YVRyYW5NYW5hZ2VyLnN0b3AoKTsKICAgICAgICB0aGlzLmRhdGFUcmFuTWFuYWdlci5wYWdlRGF0YVNlcnZpY2UgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIG9icyA9IHZtLiRvcHRpb25zLmdsb2JhbFN0b3JlOwoKICAgICAgaWYgKHR5cGVvZiBvYnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBvYnMgPSBvYnMuY2FsbCh2bSk7CiAgICAgIH0KCiAgICAgIGlmIChvYnMpIHsvLyAgIHZtLiRvYnNlcnZhYmxlcyA9IHt9CiAgICAgICAgLy8gICBPYmplY3Qua2V5cyhvYnMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAvLyAgICAgZGVmaW5lUmVhY3RpdmUodm0sIGtleSwgdW5kZWZpbmVkKQogICAgICAgIC8vICAgICBjb25zdCBvYiA9IHZtLiRvYnNlcnZhYmxlc1trZXldID0gb2JzW2tleV0KICAgICAgICAvLyAgICAgaWYgKCFpc09ic2VydmFibGUob2IpKSB7CiAgICAgICAgLy8gICAgICAgd2FybigKICAgICAgICAvLyAgICAgICAgICdJbnZhbGlkIE9ic2VydmFibGUgZm91bmQgaW4gc3Vic2NyaXB0aW9ucyBvcHRpb24gd2l0aCBrZXkgIicgKyBrZXkgKyAnIi4nLAogICAgICAgIC8vICAgICAgICAgdm0KICAgICAgICAvLyAgICAgICApCiAgICAgICAgLy8gICAgICAgcmV0dXJuCiAgICAgICAgLy8gICAgIH0KICAgICAgICAvLyAgICAgdm0uX3N1YnNjcmlwdGlvbi5hZGQob2JzW2tleV0uc3Vic2NyaWJlKHZhbHVlID0+IHsKICAgICAgICAvLyAgICAgICB2bVtrZXldID0gdmFsdWUKICAgICAgICAvLyAgICAgfSwgKGVycm9yKSA9PiB7IHRocm93IGVycm9yIH0pKQogICAgICAgIC8vICAgfSkKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRHbG9iYWxEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kR2xvYmFsRGF0YShrZXksIGRhdGEsIHBhdGgpIHsKICAgICAgdmFyIHNlcnZpY2UgPSB0aGlzLmRhdGFUcmFuTWFuYWdlci5maW5kT2ZDcmVhdGVHbG9iYWxTZXJ2aWNlKGtleSk7CgogICAgICBpZiAoc2VydmljZSkgewogICAgICAgIHNlcnZpY2Uuc2VuZERhdGEoZGF0YSwgJycsIHBhdGgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0R2xvYmFsRGF0YUNhbGxiYWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRHbG9iYWxEYXRhQ2FsbGJhY2soa2V5LCBjYWxsYmFjaywgcGF0aCkgewogICAgICB2YXIgc2VydmljZSA9IHRoaXMuZGF0YVRyYW5NYW5hZ2VyLmZpbmRPZkNyZWF0ZUdsb2JhbFNlcnZpY2Uoa2V5KTsKCiAgICAgIGlmIChzZXJ2aWNlKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zRm9yR2xvYmFsLnB1c2goc2VydmljZS4kc3RhdGUuc3Vic2NyaWJlKGZ1bmN0aW9uIChzdGF0ZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2FsbGJhY2soc3RhdGUpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ3NldEdsb2JhbERhdGFDYWxsYmFjaycsIGUpOwogICAgICAgICAgfQogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRQYWdlRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZFBhZ2VEYXRhKGRhdGEsIHBhdGgpIHsKICAgICAgaWYgKCF0aGlzLmRhdGFUcmFuTWFuYWdlci5wYWdlRGF0YVNlcnZpY2UpIHRoaXMuZGF0YVRyYW5NYW5hZ2VyLnBhZ2VEYXRhU2VydmljZSA9IG5ldyBBbnlUeXBlU3RvcmVTZXJ2aWNlKCk7CiAgICAgIHRoaXMuZGF0YVRyYW5NYW5hZ2VyLnBhZ2VEYXRhU2VydmljZS5zZW5kRGF0YShkYXRhLCAnJywgcGF0aCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0UGFnZURhdGFDYWxsYmFjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UGFnZURhdGFDYWxsYmFjayhjYWxsYmFjaykgewogICAgICBpZiAoIXRoaXMuZGF0YVRyYW5NYW5hZ2VyLnBhZ2VEYXRhU2VydmljZSkgdGhpcy5kYXRhVHJhbk1hbmFnZXIucGFnZURhdGFTZXJ2aWNlID0gbmV3IEFueVR5cGVTdG9yZVNlcnZpY2UoKTsKICAgICAgdGhpcy5zdWJzY3JpcHRpb25zRm9yR2xvYmFsLnB1c2godGhpcy5kYXRhVHJhbk1hbmFnZXIucGFnZURhdGFTZXJ2aWNlLiRzdGF0ZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHN0YXRlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNhbGxiYWNrKHN0YXRlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ3NldFBhZ2VEYXRhQ2FsbGJhY2snLCBlKTsKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kUGFnZUNvbW1hbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRQYWdlQ29tbWFuZChjb21tYW5kLCBhcmd1bWVudCkgewogICAgICBpZiAoIXRoaXMuZGF0YVRyYW5NYW5hZ2VyLnBhZ2VEYXRhU2VydmljZSkgdGhpcy5kYXRhVHJhbk1hbmFnZXIucGFnZURhdGFTZXJ2aWNlID0gbmV3IEFueVR5cGVTdG9yZVNlcnZpY2UoKTsKICAgICAgdGhpcy5kYXRhVHJhbk1hbmFnZXIucGFnZURhdGFTZXJ2aWNlLnNlbmRDb21tYW5kKGNvbW1hbmQsIGFyZ3VtZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRQYWdlQ29tbWFuZENhbGxiYWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQYWdlQ29tbWFuZENhbGxiYWNrKGNhbGxiYWNrKSB7CiAgICAgIGlmICghdGhpcy5kYXRhVHJhbk1hbmFnZXIucGFnZURhdGFTZXJ2aWNlKSB0aGlzLmRhdGFUcmFuTWFuYWdlci5wYWdlRGF0YVNlcnZpY2UgPSBuZXcgQW55VHlwZVN0b3JlU2VydmljZSgpOwogICAgICB0aGlzLnN1YnNjcmlwdGlvbnNGb3JHbG9iYWwucHVzaCh0aGlzLmRhdGFUcmFuTWFuYWdlci5wYWdlRGF0YVNlcnZpY2UuJGNvbW1hbmQuc3Vic2NyaWJlKGZ1bmN0aW9uIChjb21tYW5kKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNhbGxiYWNrKGNvbW1hbmQuY29tbWFuZCwgY29tbWFuZC5hcmd1bWVudCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS53YXJuKCdzZXRQYWdlQ29tbWFuZENhbGxiYWNrJywgZSk7CiAgICAgICAgfQogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZEdsb2JhbENvbW1hbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRHbG9iYWxDb21tYW5kKGtleSwgY29tbWFuZCwgYXJndW1lbnQpIHsKICAgICAgdmFyIHNlcnZpY2UgPSB0aGlzLmRhdGFUcmFuTWFuYWdlci5maW5kT2ZDcmVhdGVHbG9iYWxTZXJ2aWNlKGtleSk7CgogICAgICBpZiAoc2VydmljZSkgewogICAgICAgIHNlcnZpY2Uuc2VuZENvbW1hbmQoY29tbWFuZCwgYXJndW1lbnQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0R2xvYmFsQ29tbWFuZENhbGxiYWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRHbG9iYWxDb21tYW5kQ2FsbGJhY2soa2V5LCBjYWxsYmFjaykgewogICAgICB2YXIgc2VydmljZSA9IHRoaXMuZGF0YVRyYW5NYW5hZ2VyLmZpbmRPZkNyZWF0ZUdsb2JhbFNlcnZpY2Uoa2V5KTsKCiAgICAgIGlmIChzZXJ2aWNlKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zRm9yR2xvYmFsLnB1c2goc2VydmljZS4kY29tbWFuZC5zdWJzY3JpYmUoZnVuY3Rpb24gKGNvbW1hbmQpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhbGxiYWNrKGNvbW1hbmQuY29tbWFuZCwgY29tbWFuZC5hcmd1bWVudCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybignc2V0R2xvYmFsQ29tbWFuZENhbGxiYWNrJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2NvcGVkU3RvcmVDb21wb25lbnQ7Cn0oVnVlKTsKClNjb3BlZFN0b3JlQ29tcG9uZW50ID0gX19kZWNvcmF0ZShbQ29tcG9uZW50XSwgU2NvcGVkU3RvcmVDb21wb25lbnQpOwpleHBvcnQgZGVmYXVsdCBTY29wZWRTdG9yZUNvbXBvbmVudDs="},{"version":3,"sources":["C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-mixin.ts"],"names":[],"mappings":"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","sourcesContent":["import Component from 'vue-class-component';\r\nimport Vue from 'vue';\r\nimport _ from 'lodash';\r\n\r\nimport {AnyTypeStoreService, StringTypeCommand} from \"./core/any-type-store-service\";\r\nimport {scopedStoreManager} from \"./scoped-store-manager\";\r\nimport { Subscription } from 'rxjs';\r\n\r\nexport interface ScopedStore {\r\n\r\n}\r\n\r\n\r\n@Component\r\nexport default class ScopedStoreComponent extends Vue {\r\n\r\n    private dataTranManager = scopedStoreManager;\r\n    private subscriptionsForPpge:Subscription[] = [];\r\n    private subscriptionsForGlobal:Subscription[] = [];\r\n\r\n    public isPage:boolean = false;\r\n\r\n    created() {\r\n        this.init();\r\n    }\r\n\r\n    beforeDestory() {\r\n        console.log('beforeDestory()');\r\n        for (const k in this.subscriptionsForGlobal) {\r\n            this.subscriptionsForGlobal[k].unsubscribe();\r\n        }\r\n\r\n        for (const k in this.subscriptionsForPpge) {\r\n            this.subscriptionsForPpge[k].unsubscribe();\r\n        }\r\n\r\n        if (this.isPage) {\r\n            this.dataTranManager.pageDataService?.stop();\r\n            this.dataTranManager.pageDataService = null;\r\n        }\r\n    }\r\n\r\n    private init() {\r\n        const vm = this;\r\n\r\n        let obs = vm.$options.globalStore;\r\n        if (typeof obs === 'function') {\r\n          obs = obs.call(vm)\r\n        }\r\n        if (obs) {\r\n        //   vm.$observables = {}\r\n        //   Object.keys(obs).forEach(key => {\r\n        //     defineReactive(vm, key, undefined)\r\n        //     const ob = vm.$observables[key] = obs[key]\r\n        //     if (!isObservable(ob)) {\r\n        //       warn(\r\n        //         'Invalid Observable found in subscriptions option with key \"' + key + '\".',\r\n        //         vm\r\n        //       )\r\n        //       return\r\n        //     }\r\n        //     vm._subscription.add(obs[key].subscribe(value => {\r\n        //       vm[key] = value\r\n        //     }, (error) => { throw error }))\r\n        //   })\r\n        }\r\n    }\r\n\r\n    public sendGlobalData(key:string, data:any, path?:string) {\r\n        const service : AnyTypeStoreService | undefined  = this.dataTranManager.findOfCreateGlobalService(key);\r\n        if (service) {\r\n            service.sendData(data, '', path);\r\n        }\r\n    }\r\n\r\n    public setGlobalDataCallback(key:string, callback: (data: any) => void, path?:string) {\r\n        const service : AnyTypeStoreService | undefined  = this.dataTranManager.findOfCreateGlobalService(key);\r\n        if (service) {\r\n            this.subscriptionsForGlobal.push(\r\n                service.$state.subscribe(state => {\r\n                    try {\r\n                        callback(state);\r\n                    } catch (e) {\r\n                        console.warn('setGlobalDataCallback', e);\r\n                    }\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    public sendPageData(data:any, path?:string) {\r\n        if (!this.dataTranManager.pageDataService)\r\n            this.dataTranManager.pageDataService = new AnyTypeStoreService();\r\n        \r\n        this.dataTranManager.pageDataService.sendData(data, '', path);\r\n    }\r\n\r\n    public setPageDataCallback(callback: (data: any) => void) {\r\n        if (!this.dataTranManager.pageDataService)\r\n            this.dataTranManager.pageDataService = new AnyTypeStoreService();\r\n\r\n        this.subscriptionsForGlobal.push(\r\n            this.dataTranManager.pageDataService.$state.subscribe(state => {\r\n                try {\r\n                    callback(state);\r\n                } catch (e) {\r\n                    console.warn('setPageDataCallback', e);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    public sendPageCommand(command:string, argument?:any) {\r\n        if (!this.dataTranManager.pageDataService)\r\n            this.dataTranManager.pageDataService = new AnyTypeStoreService();\r\n        \r\n        this.dataTranManager.pageDataService.sendCommand(command, argument);\r\n    }\r\n\r\n    public setPageCommandCallback(callback: (command:string, argument?:any) => void) {\r\n        if (!this.dataTranManager.pageDataService)\r\n            this.dataTranManager.pageDataService = new AnyTypeStoreService();\r\n\r\n        this.subscriptionsForGlobal.push(\r\n            this.dataTranManager.pageDataService.$command.subscribe(command => {\r\n                try {\r\n                    callback(command.command, command.argument);\r\n                } catch (e) {\r\n                    console.warn('setPageCommandCallback', e);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    public sendGlobalCommand(key:string, command:string, argument?:any) {\r\n        const service = this.dataTranManager.findOfCreateGlobalService(key);\r\n        if (service) {\r\n            service.sendCommand(command, argument);\r\n        }\r\n    }\r\n\r\n    public setGlobalCommandCallback(key:string, callback: (command: string, argument?: any) => void) {\r\n        const service : AnyTypeStoreService | undefined  = this.dataTranManager.findOfCreateGlobalService(key);\r\n        if (service) {\r\n            this.subscriptionsForGlobal.push(\r\n                service.$command.subscribe((command:StringTypeCommand) => {\r\n                    try {\r\n                        callback(command.command, command.argument);\r\n                    } catch (e) {\r\n                        console.warn('setGlobalCommandCallback', e);\r\n                    }\r\n                })\r\n            );\r\n        }\r\n    }\r\n}"],"sourceRoot":""}]}