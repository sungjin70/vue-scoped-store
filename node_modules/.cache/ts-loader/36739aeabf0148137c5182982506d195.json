{"remainingRequest":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js!C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts","dependencies":[{"path":"C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts","mtime":1625908162725},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBBbnlUeXBlU3RvcmVTZXJ2aWNlIH0gZnJvbSAnLi9jb3JlL2FueS10eXBlLXN0b3JlLXNlcnZpY2UnOyAvLyBpbXBvcnQge0Jhc2VTdG9yZVNlcnZpY2V9IGZyb20gJy4vY29yZS9iYXNlLXN0b3JlLXNlcnZpY2UnOwoKdmFyIHNjb3BlZE1hcCA9IG5ldyBNYXAoKTsKdmFyIGdsb2JhbE1hcCA9IG5ldyBNYXAoKTsKdmFyIGhhc2hlZENvbXBvbmVudE1hcCA9IG5ldyBNYXAoKTsKZXhwb3J0IHZhciBzY29wZWRTdG9yZU1hbmFnZXIgPSB7CiAgcGFnZURhdGFTZXJ2aWNlOiB1bmRlZmluZWQsCiAgYWRkUGF0aE1ldGFJbkNvbXBvbmVudDogZnVuY3Rpb24gYWRkUGF0aE1ldGFJbkNvbXBvbmVudChoYXNoLCBtZXRhKSB7CiAgICBpZiAoIWhhc2hlZENvbXBvbmVudE1hcC5oYXMoaGFzaCkpIGhhc2hlZENvbXBvbmVudE1hcC5zZXQoaGFzaCwgW10pOwogICAgdmFyIG1ldGFBcnIgPSBoYXNoZWRDb21wb25lbnRNYXAuZ2V0KGhhc2gpOwogICAgbWV0YUFyciA9PT0gbnVsbCB8fCBtZXRhQXJyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRhQXJyLnB1c2gobWV0YSk7CiAgICBoYXNoZWRDb21wb25lbnRNYXAuc2V0KGhhc2gsIG1ldGFBcnIpOwogIH0sCiAgZ2V0UGF0aE1ldGFJbkNvbXBvbmVudDogZnVuY3Rpb24gZ2V0UGF0aE1ldGFJbkNvbXBvbmVudChoYXNoKSB7CiAgICByZXR1cm4gaGFzaGVkQ29tcG9uZW50TWFwLmdldChoYXNoKTsKICB9LAogIGdldFBhdGhNZXRhSW5Db21wb25lbnRDb3VudDogZnVuY3Rpb24gZ2V0UGF0aE1ldGFJbkNvbXBvbmVudENvdW50KGhhc2gpIHsKICAgIHZhciBwYXRoTWV0YXMgPSBoYXNoZWRDb21wb25lbnRNYXAuZ2V0KGhhc2gpOwogICAgcmV0dXJuICFwYXRoTWV0YXMgPyAwIDogcGF0aE1ldGFzLmxlbmd0aDsKICB9LAogIGZpbmRPZkNyZWF0ZVNjb3BlZFNlcnZpY2U6IGZ1bmN0aW9uIGZpbmRPZkNyZWF0ZVNjb3BlZFNlcnZpY2Uoa2V5KSB7CiAgICBpZiAoIXNjb3BlZE1hcC5oYXMoa2V5KSkgewogICAgICBzY29wZWRNYXAuc2V0KGtleSwgbmV3IEFueVR5cGVTdG9yZVNlcnZpY2UoKSk7CiAgICB9CgogICAgcmV0dXJuIHNjb3BlZE1hcC5nZXQoa2V5KTsKICB9LAogIGhhc1Njb3BlZFNlcnZpY2U6IGZ1bmN0aW9uIGhhc1Njb3BlZFNlcnZpY2Uoa2V5KSB7CiAgICByZXR1cm4gc2NvcGVkTWFwLmhhcyhrZXkpOwogIH0sCiAgZ2V0U2NvcGVkU2VydmljZTogZnVuY3Rpb24gZ2V0U2NvcGVkU2VydmljZShrZXkpIHsKICAgIGlmICghc2NvcGVkTWFwLmhhcyhrZXkpKSB7CiAgICAgIHRocm93ICJnZXR0aW5nIHNlcnZpY2Ugd2l0aCBrZXk9Ii5jb25jYXQoa2V5LCAiIGZhaWxlZCIpOwogICAgfQoKICAgIHJldHVybiBzY29wZWRNYXAuZ2V0KGtleSk7CiAgfSwKICByZW1vdmVTY29wZWRTZXJ2aWNlOiBmdW5jdGlvbiByZW1vdmVTY29wZWRTZXJ2aWNlKGtleSkgewogICAgaWYgKCF0aGlzLmhhc1Njb3BlZFNlcnZpY2Uoa2V5KSkgcmV0dXJuO2Vsc2UgewogICAgICB2YXIgc2VydmljZSA9IHNjb3BlZE1hcC5nZXQoa2V5KTsKICAgICAgaWYgKHNlcnZpY2UgIT0gdW5kZWZpbmVkKSBzZXJ2aWNlLnN0b3AoKTsKICAgICAgc2NvcGVkTWFwLmRlbGV0ZShrZXkpOwogICAgfQogIH0sCiAgZmluZE9mQ3JlYXRlR2xvYmFsU2VydmljZTogZnVuY3Rpb24gZmluZE9mQ3JlYXRlR2xvYmFsU2VydmljZShrZXkpIHsKICAgIGlmICghZ2xvYmFsTWFwLmhhcyhrZXkpKSB7CiAgICAgIGdsb2JhbE1hcC5zZXQoa2V5LCBuZXcgQW55VHlwZVN0b3JlU2VydmljZSgpKTsKICAgIH0KCiAgICByZXR1cm4gZ2xvYmFsTWFwLmdldChrZXkpOwogIH0sCiAgaGFzR2xvYmFsU2VydmljZTogZnVuY3Rpb24gaGFzR2xvYmFsU2VydmljZShrZXkpIHsKICAgIHJldHVybiBnbG9iYWxNYXAuaGFzKGtleSk7CiAgfSwKICBnZXRHbG9iYWxTZXJ2aWNlOiBmdW5jdGlvbiBnZXRHbG9iYWxTZXJ2aWNlKGtleSkgewogICAgaWYgKCFnbG9iYWxNYXAuaGFzKGtleSkpIHsKICAgICAgdGhyb3cgImdldHRpbmcgc2VydmljZSB3aXRoIGtleT0iLmNvbmNhdChrZXksICIgZmFpbGVkIik7CiAgICB9CgogICAgcmV0dXJuIGdsb2JhbE1hcC5nZXQoa2V5KTsKICB9LAogIHJlbW92ZUdsb2JhbFNlcnZpY2U6IGZ1bmN0aW9uIHJlbW92ZUdsb2JhbFNlcnZpY2Uoa2V5KSB7CiAgICBpZiAoIXRoaXMuaGFzR2xvYmFsU2VydmljZShrZXkpKSByZXR1cm47ZWxzZSB7CiAgICAgIHZhciBzZXJ2aWNlID0gZ2xvYmFsTWFwLmdldChrZXkpOwogICAgICBpZiAoc2VydmljZSAhPSB1bmRlZmluZWQpIHNlcnZpY2Uuc3RvcCgpOwogICAgICBnbG9iYWxNYXAuZGVsZXRlKGtleSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts"],"names":[],"mappings":"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","sourcesContent":["import {AnyTypeStoreService} from './core/any-type-store-service';\r\n// import {BaseStoreService} from './core/base-store-service';\r\n\r\nconst scopedMap = new Map<string,AnyTypeStoreService>();\r\nconst globalMap = new Map<string,AnyTypeStoreService>();\r\nconst hashedComponentMap = new Map<string, any[]>();\r\n\r\nexport interface ScopedStoreManager {\r\n    pageDataService?:AnyTypeStoreService;\r\n    addPathMetaInComponent:(hash:string, meta:{path:string,options?:{}}) => void;\r\n    getPathMetaInComponent:(hash:string) => any[] | undefined;\r\n    getPathMetaInComponentCount:(hash:string) => number;\r\n    findOfCreateScopedService:(key:string) => AnyTypeStoreService|undefined;\r\n    hasScopedService:(key:string) => boolean;\r\n    getScopedService:(key:string) => AnyTypeStoreService|undefined;\r\n    removeScopedService:(key:string) => void;\r\n    findOfCreateGlobalService:(key:string) => AnyTypeStoreService|undefined;\r\n    hasGlobalService:(key:string) => boolean;\r\n    getGlobalService:(key:string) => AnyTypeStoreService|undefined;\r\n    removeGlobalService:(key:string) => void;\r\n}\r\n\r\nexport const scopedStoreManager : ScopedStoreManager = {\r\n    pageDataService:undefined,\r\n    addPathMetaInComponent(hash:string, meta:{path:string,options?:{}}) {\r\n        if (!hashedComponentMap.has(hash))\r\n            hashedComponentMap.set(hash,[]);\r\n            \r\n        const metaArr = hashedComponentMap.get(hash);\r\n        metaArr?.push(meta);\r\n        hashedComponentMap.set(hash, metaArr as any[]);\r\n    },\r\n    getPathMetaInComponent(hash:string) {\r\n        return hashedComponentMap.get(hash);\r\n    },\r\n    getPathMetaInComponentCount(hash:string) {\r\n        const pathMetas = hashedComponentMap.get(hash);\r\n        return (!pathMetas ? 0 : pathMetas.length);\r\n    },\r\n\r\n    findOfCreateScopedService(key:string) {\r\n        if (!scopedMap.has(key)) {\r\n            scopedMap.set(key, new AnyTypeStoreService());\r\n        }\r\n\r\n        return scopedMap.get(key);\r\n    },\r\n    hasScopedService(key:string) {\r\n        return scopedMap.has(key);\r\n    },\r\n    getScopedService(key:string) {\r\n        if (!scopedMap.has(key)) {\r\n            throw `getting service with key=${key} failed`;\r\n        }\r\n\r\n        return scopedMap.get(key);\r\n    },\r\n    removeScopedService(key:string) {\r\n        if (!this.hasScopedService(key))\r\n            return;\r\n        else {\r\n            const service = scopedMap.get(key);\r\n            if (service != undefined)\r\n                service.stop();\r\n\r\n            scopedMap.delete(key);\r\n        }\r\n    },\r\n\r\n    findOfCreateGlobalService(key:string) {\r\n        if (!globalMap.has(key)) {\r\n            globalMap.set(key, new AnyTypeStoreService());\r\n        }\r\n\r\n        return globalMap.get(key);\r\n    },\r\n    hasGlobalService(key:string) {\r\n        return globalMap.has(key);\r\n    },\r\n    getGlobalService(key:string) {\r\n        if (!globalMap.has(key)) {\r\n            throw `getting service with key=${key} failed`;\r\n        }\r\n\r\n        return globalMap.get(key);\r\n    },\r\n    removeGlobalService(key:string) {\r\n        if (!this.hasGlobalService(key))\r\n            return;\r\n        else {\r\n            const service = globalMap.get(key);\r\n            if (service != undefined)\r\n                service.stop();\r\n\r\n            globalMap.delete(key);\r\n        }\r\n    },\r\n\r\n}\r\n"],"sourceRoot":""}]}