{"remainingRequest":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js!C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts","dependencies":[{"path":"C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts","mtime":1624695309825},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\project\\scoped-store\\vue-scoped-store\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeyBBbnlUeXBlU3RvcmVTZXJ2aWNlIH0gZnJvbSAnLi9jb3JlL2FueS10eXBlLXN0b3JlLXNlcnZpY2UnOyAvLyBpbXBvcnQge0Jhc2VTdG9yZVNlcnZpY2V9IGZyb20gJy4vY29yZS9iYXNlLXN0b3JlLXNlcnZpY2UnOwoKdmFyIHNjb3BlZE1hcCA9IG5ldyBNYXAoKTsKdmFyIGdsb2JhbE1hcCA9IG5ldyBNYXAoKTsKdmFyIGhhc2hlZENvbXBvbmVudE1hcCA9IG5ldyBNYXAoKTsKZXhwb3J0IHZhciBzY29wZWRTdG9yZU1hbmFnZXIgPSB7CiAgcGFnZURhdGFTZXJ2aWNlOiBudWxsLAogIGFkZFBhdGhNZXRhSW5Db21wb25lbnQ6IGZ1bmN0aW9uIGFkZFBhdGhNZXRhSW5Db21wb25lbnQoaGFzaCwgbWV0YSkgewogICAgaWYgKCFoYXNoZWRDb21wb25lbnRNYXAuaGFzKGhhc2gpKSBoYXNoZWRDb21wb25lbnRNYXAuc2V0KGhhc2gsIFtdKTsKICAgIHZhciBtZXRhQXJyID0gaGFzaGVkQ29tcG9uZW50TWFwLmdldChoYXNoKTsKICAgIG1ldGFBcnIgPT09IG51bGwgfHwgbWV0YUFyciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0YUFyci5wdXNoKG1ldGEpOwogICAgaGFzaGVkQ29tcG9uZW50TWFwLnNldChoYXNoLCBtZXRhQXJyKTsKICB9LAogIGdldFBhdGhNZXRhSW5Db21wb25lbnQ6IGZ1bmN0aW9uIGdldFBhdGhNZXRhSW5Db21wb25lbnQoaGFzaCkgewogICAgcmV0dXJuIGhhc2hlZENvbXBvbmVudE1hcC5nZXQoaGFzaCk7CiAgfSwKICBnZXRQYXRoTWV0YUluQ29tcG9uZW50Q291bnQ6IGZ1bmN0aW9uIGdldFBhdGhNZXRhSW5Db21wb25lbnRDb3VudChoYXNoKSB7CiAgICB2YXIgcGF0aE1ldGFzID0gaGFzaGVkQ29tcG9uZW50TWFwLmdldChoYXNoKTsKICAgIHJldHVybiAhcGF0aE1ldGFzID8gMCA6IHBhdGhNZXRhcy5sZW5ndGg7CiAgfSwKICBmaW5kT2ZDcmVhdGVTY29wZWRTZXJ2aWNlOiBmdW5jdGlvbiBmaW5kT2ZDcmVhdGVTY29wZWRTZXJ2aWNlKGtleSkgewogICAgaWYgKCFzY29wZWRNYXAuaGFzKGtleSkpIHsKICAgICAgc2NvcGVkTWFwLnNldChrZXksIG5ldyBBbnlUeXBlU3RvcmVTZXJ2aWNlKCkpOwogICAgfQoKICAgIHJldHVybiBzY29wZWRNYXAuZ2V0KGtleSk7CiAgfSwKICBoYXNTY29wZWRTZXJ2aWNlOiBmdW5jdGlvbiBoYXNTY29wZWRTZXJ2aWNlKGtleSkgewogICAgcmV0dXJuIHNjb3BlZE1hcC5oYXMoa2V5KTsKICB9LAogIGdldFNjb3BlZFNlcnZpY2U6IGZ1bmN0aW9uIGdldFNjb3BlZFNlcnZpY2Uoa2V5KSB7CiAgICBpZiAoIXNjb3BlZE1hcC5oYXMoa2V5KSkgewogICAgICB0aHJvdyAiZ2V0dGluZyBzZXJ2aWNlIHdpdGgga2V5PSIuY29uY2F0KGtleSwgIiBmYWlsZWQiKTsKICAgIH0KCiAgICByZXR1cm4gc2NvcGVkTWFwLmdldChrZXkpOwogIH0sCiAgcmVtb3ZlU2NvcGVkU2VydmljZTogZnVuY3Rpb24gcmVtb3ZlU2NvcGVkU2VydmljZShrZXkpIHsKICAgIGlmICghdGhpcy5oYXNTY29wZWRTZXJ2aWNlKGtleSkpIHJldHVybjtlbHNlIHsKICAgICAgdmFyIHNlcnZpY2UgPSBzY29wZWRNYXAuZ2V0KGtleSk7CiAgICAgIGlmIChzZXJ2aWNlICE9IHVuZGVmaW5lZCkgc2VydmljZS5zdG9wKCk7CiAgICAgIHNjb3BlZE1hcC5kZWxldGUoa2V5KTsKICAgIH0KICB9LAogIGZpbmRPZkNyZWF0ZUdsb2JhbFNlcnZpY2U6IGZ1bmN0aW9uIGZpbmRPZkNyZWF0ZUdsb2JhbFNlcnZpY2Uoa2V5KSB7CiAgICBpZiAoIWdsb2JhbE1hcC5oYXMoa2V5KSkgewogICAgICBnbG9iYWxNYXAuc2V0KGtleSwgbmV3IEFueVR5cGVTdG9yZVNlcnZpY2UoKSk7CiAgICB9CgogICAgcmV0dXJuIGdsb2JhbE1hcC5nZXQoa2V5KTsKICB9LAogIGhhc0dsb2JhbFNlcnZpY2U6IGZ1bmN0aW9uIGhhc0dsb2JhbFNlcnZpY2Uoa2V5KSB7CiAgICByZXR1cm4gZ2xvYmFsTWFwLmhhcyhrZXkpOwogIH0sCiAgZ2V0R2xvYmFsU2VydmljZTogZnVuY3Rpb24gZ2V0R2xvYmFsU2VydmljZShrZXkpIHsKICAgIGlmICghZ2xvYmFsTWFwLmhhcyhrZXkpKSB7CiAgICAgIHRocm93ICJnZXR0aW5nIHNlcnZpY2Ugd2l0aCBrZXk9Ii5jb25jYXQoa2V5LCAiIGZhaWxlZCIpOwogICAgfQoKICAgIHJldHVybiBnbG9iYWxNYXAuZ2V0KGtleSk7CiAgfSwKICByZW1vdmVHbG9iYWxTZXJ2aWNlOiBmdW5jdGlvbiByZW1vdmVHbG9iYWxTZXJ2aWNlKGtleSkgewogICAgaWYgKCF0aGlzLmhhc0dsb2JhbFNlcnZpY2Uoa2V5KSkgcmV0dXJuO2Vsc2UgewogICAgICB2YXIgc2VydmljZSA9IGdsb2JhbE1hcC5nZXQoa2V5KTsKICAgICAgaWYgKHNlcnZpY2UgIT0gdW5kZWZpbmVkKSBzZXJ2aWNlLnN0b3AoKTsKICAgICAgZ2xvYmFsTWFwLmRlbGV0ZShrZXkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:\\project\\scoped-store\\vue-scoped-store\\src\\scoped-store\\scoped-store-manager.ts"],"names":[],"mappings":"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","sourcesContent":["import {AnyTypeStoreService} from './core/any-type-store-service';\r\n// import {BaseStoreService} from './core/base-store-service';\r\n\r\nconst scopedMap = new Map<string,AnyTypeStoreService>();\r\nconst globalMap = new Map<string,AnyTypeStoreService>();\r\nconst hashedComponentMap = new Map<string, any[]>();\r\n\r\nexport interface ScopedStoreManager {\r\n    pageDataService:AnyTypeStoreService | null;\r\n    addPathMetaInComponent:(hash:string, meta:{path:string,options?:{}}) => void;\r\n    getPathMetaInComponent:(hash:string) => any[] | undefined;\r\n    getPathMetaInComponentCount:(hash:string) => number;\r\n    findOfCreateScopedService:(key:string) => AnyTypeStoreService|undefined;\r\n    hasScopedService:(key:string) => boolean;\r\n    getScopedService:(key:string) => AnyTypeStoreService|undefined;\r\n    removeScopedService:(key:string) => void;\r\n    findOfCreateGlobalService:(key:string) => AnyTypeStoreService|undefined;\r\n    hasGlobalService:(key:string) => boolean;\r\n    getGlobalService:(key:string) => AnyTypeStoreService|undefined;\r\n    removeGlobalService:(key:string) => void;\r\n}\r\n\r\nexport const scopedStoreManager : ScopedStoreManager = {\r\n    pageDataService:null,\r\n    addPathMetaInComponent(hash:string, meta:{path:string,options?:{}}) {\r\n        if (!hashedComponentMap.has(hash))\r\n            hashedComponentMap.set(hash,[]);\r\n            \r\n        const metaArr = hashedComponentMap.get(hash);\r\n        metaArr?.push(meta);\r\n        hashedComponentMap.set(hash, metaArr as any[]);\r\n    },\r\n    getPathMetaInComponent(hash:string) {\r\n        return hashedComponentMap.get(hash);\r\n    },\r\n    getPathMetaInComponentCount(hash:string) {\r\n        const pathMetas = hashedComponentMap.get(hash);\r\n        return (!pathMetas ? 0 : pathMetas.length);\r\n    },\r\n\r\n    findOfCreateScopedService(key:string) {\r\n        if (!scopedMap.has(key)) {\r\n            scopedMap.set(key, new AnyTypeStoreService());\r\n        }\r\n\r\n        return scopedMap.get(key);\r\n    },\r\n    hasScopedService(key:string) {\r\n        return scopedMap.has(key);\r\n    },\r\n    getScopedService(key:string) {\r\n        if (!scopedMap.has(key)) {\r\n            throw `getting service with key=${key} failed`;\r\n        }\r\n\r\n        return scopedMap.get(key);\r\n    },\r\n    removeScopedService(key:string) {\r\n        if (!this.hasScopedService(key))\r\n            return;\r\n        else {\r\n            const service = scopedMap.get(key);\r\n            if (service != undefined)\r\n                service.stop();\r\n\r\n            scopedMap.delete(key);\r\n        }\r\n    },\r\n\r\n    findOfCreateGlobalService(key:string) {\r\n        if (!globalMap.has(key)) {\r\n            globalMap.set(key, new AnyTypeStoreService());\r\n        }\r\n\r\n        return globalMap.get(key);\r\n    },\r\n    hasGlobalService(key:string) {\r\n        return globalMap.has(key);\r\n    },\r\n    getGlobalService(key:string) {\r\n        if (!globalMap.has(key)) {\r\n            throw `getting service with key=${key} failed`;\r\n        }\r\n\r\n        return globalMap.get(key);\r\n    },\r\n    removeGlobalService(key:string) {\r\n        if (!this.hasGlobalService(key))\r\n            return;\r\n        else {\r\n            const service = globalMap.get(key);\r\n            if (service != undefined)\r\n                service.stop();\r\n\r\n            globalMap.delete(key);\r\n        }\r\n    },\r\n\r\n}\r\n"],"sourceRoot":""}]}